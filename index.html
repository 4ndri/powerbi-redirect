<!DOCTYPE html>
<html style="height:100%;">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Redirecting custom protocol</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body style="height:100%;">
    <script type="text/javascript">
      function redirect(doClose){
        try{
          var url = window.location.search;
          if(url){
            url = url.replace(/^\?/,'');
            if(url){
              
              let w = window.open(url);
              if(doClose){
                setTimeout(function(){
                  close();
                  w.close();
                }, 1000);
              }
            }
          }
        }catch(ex){
          console.error(ex);
        }
      }
      setTimeout(redirect,500);
    </script>
    <button id="btn-redirect" onclick="redirect(true);">Open</button>
  </body>
</html>
